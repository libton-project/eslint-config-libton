// final vite rules
[
  ['for-direction', 'error'],
  ['no-async-promise-executor', 'error'],
  ['no-case-declarations', 'error'],
  ['no-compare-neg-zero', 'error'],
  ['no-cond-assign', 'error'],
  ['no-constant-binary-expression', 'error'],
  ['no-constant-condition', 'error'],
  ['no-control-regex', 'error'],
  ['no-debugger', 'error'],
  ['no-delete-var', 'error'],
  ['no-dupe-else-if', 'error'],
  ['no-duplicate-case', 'error'],
  ['no-empty', 'error'],
  ['no-empty-character-class', 'error'],
  ['no-empty-pattern', 'error'],
  ['no-empty-static-block', 'error'],
  ['no-ex-assign', 'error'],
  ['no-extra-boolean-cast', 'error'],
  ['no-fallthrough', 'error'],
  ['no-global-assign', 'error'],
  ['no-invalid-regexp', 'error'],
  ['no-irregular-whitespace', 'error'],
  ['no-loss-of-precision', 'error'],
  ['no-misleading-character-class', 'error'],
  ['no-nonoctal-decimal-escape', 'error'],
  ['no-octal', 'error'],
  ['no-prototype-builtins', 'error'],
  ['no-regex-spaces', 'error'],
  ['no-self-assign', 'error'],
  ['no-shadow-restricted-names', 'error'],
  ['no-sparse-arrays', 'error'],
  ['no-unexpected-multiline', 'error'],
  ['no-unsafe-finally', 'error'],
  ['no-unsafe-optional-chaining', 'error'],
  ['no-unused-labels', 'error'],
  ['no-unused-private-class-members', 'error'],
  ['no-useless-backreference', 'error'],
  ['no-useless-catch', 'error'],
  ['no-useless-escape', 'error'],
  ['require-yield', 'error'],
  ['use-isnan', 'error'],
  ['valid-typeof', 'error'],
  ['adjacent-overload-signatures', 'error'],
  ['array-type', 'error'],
  ['await-thenable', 'error'],
  ['ban-ts-comment', 'error'],
  ['ban-tslint-comment', 'error'],
  ['class-literal-property-style', 'error'],
  ['consistent-generic-constructors', 'error'],
  ['consistent-indexed-object-style', 'error'],
  ['consistent-type-assertions', 'error'],
  ['consistent-type-definitions', 'error'],
  ['consistent-type-exports', 'error'],
  ['consistent-type-imports', 'error'],
  ['explicit-function-return-type', 'error'],
  ['explicit-member-accessibility', 'error'],
  ['explicit-module-boundary-types', 'error'],
  ['member-ordering', 'error'],
  ['method-signature-style', 'error'],
  ['naming-convention', 'error'],
  ['no-array-delete', 'error'],
  ['no-base-to-string', 'error'],
  ['no-confusing-non-null-assertion', 'error'],
  ['no-confusing-void-expression', 'error'],
  ['no-deprecated', 'error'],
  ['no-duplicate-enum-values', 'error'],
  ['no-duplicate-type-constituents', 'error'],
  ['no-dynamic-delete', 'error'],
  ['no-empty-interface', 'error'],
  ['no-empty-object-type', 'error'],
  ['no-explicit-any', 'error'],
  ['no-extra-non-null-assertion', 'error'],
  ['no-extraneous-class', 'error'],
  ['no-floating-promises', 'error'],
  ['no-for-in-array', 'error'],
  ['no-import-type-side-effects', 'error'],
  ['no-inferrable-types', 'error'],
  ['no-invalid-void-type', 'error'],
  ['no-meaningless-void-operator', 'error'],
  ['no-misused-new', 'error'],
  ['no-misused-promises', 'error'],
  ['no-misused-spread', 'error'],
  ['no-mixed-enums', 'error'],
  ['no-namespace', 'error'],
  ['no-non-null-asserted-nullish-coalescing', 'error'],
  ['no-non-null-asserted-optional-chain', 'error'],
  ['no-non-null-assertion', 'error'],
  ['no-redundant-type-constituents', 'error'],
  ['no-require-imports', 'error'],
  ['no-restricted-types', 'error'],
  ['no-this-alias', 'error'],
  ['no-type-alias', 'error'],
  ['no-unnecessary-boolean-literal-compare', 'error'],
  ['no-unnecessary-condition', 'error'],
  ['no-unnecessary-parameter-property-assignment', 'error'],
  ['no-unnecessary-qualifier', 'error'],
  ['no-unnecessary-template-expression', 'error'],
  ['no-unnecessary-type-arguments', 'error'],
  ['no-unnecessary-type-assertion', 'error'],
  ['no-unnecessary-type-constraint', 'error'],
  ['no-unnecessary-type-conversion', 'error'],
  ['no-unnecessary-type-parameters', 'error'],
  ['no-unsafe-argument', 'error'],
  ['no-unsafe-assignment', 'error'],
  ['no-unsafe-call', 'error'],
  ['no-unsafe-declaration-merging', 'error'],
  ['no-unsafe-enum-comparison', 'error'],
  ['no-unsafe-function-type', 'error'],
  ['no-unsafe-member-access', 'error'],
  ['no-unsafe-return', 'error'],
  ['no-unsafe-type-assertion', 'error'],
  ['no-unsafe-unary-minus', 'error'],
  ['no-useless-empty-export', 'error'],
  ['no-var-requires', 'error'],
  ['no-wrapper-object-types', 'error'],
  ['non-nullable-type-assertion-style', 'error'],
  ['only-throw-error', 'error'],
  ['parameter-properties', 'error'],
  ['prefer-as-const', 'error'],
  ['prefer-enum-initializers', 'error'],
  ['prefer-find', 'error'],
  ['prefer-for-of', 'error'],
  ['prefer-function-type', 'error'],
  ['prefer-includes', 'error'],
  ['prefer-literal-enum-member', 'error'],
  ['prefer-namespace-keyword', 'error'],
  ['prefer-nullish-coalescing', 'error'],
  ['prefer-optional-chain', 'error'],
  ['prefer-readonly', 'error'],
  ['prefer-readonly-parameter-types', 'error'],
  ['prefer-reduce-type-parameter', 'error'],
  ['prefer-regexp-exec', 'error'],
  ['prefer-return-this-type', 'error'],
  ['prefer-string-starts-ends-with', 'error'],
  ['prefer-ts-expect-error', 'error'],
  ['promise-function-async', 'error'],
  ['related-getter-setter-pairs', 'error'],
  ['require-array-sort-compare', 'error'],
  ['restrict-plus-operands', 'error'],
  ['restrict-template-expressions', 'error'],
  ['return-await', 'error'],
  ['sort-type-constituents', 'error'],
  ['strict-boolean-expressions', 'error'],
  ['switch-exhaustiveness-check', 'error'],
  ['triple-slash-reference', 'error'],
  ['typedef', 'error'],
  ['unbound-method', 'error'],
  ['unified-signatures', 'error'],
  ['use-unknown-in-catch-callback-variable', 'error'],
  ['@typescript-eslint/adjacent-overload-signatures', 'error'],
  ['@typescript-eslint/array-type', 'error'],
  ['@typescript-eslint/ban-ts-comment', 'error'],
  ['@typescript-eslint/ban-tslint-comment', 'error'],
  ['@typescript-eslint/class-literal-property-style', 'error'],
  ['@typescript-eslint/class-methods-use-this', 'error'],
  ['@typescript-eslint/consistent-generic-constructors', 'error'],
  ['@typescript-eslint/consistent-indexed-object-style', 'error'],
  ['@typescript-eslint/consistent-type-assertions', 'error'],
  ['@typescript-eslint/consistent-type-definitions', 'error'],
  ['@typescript-eslint/consistent-type-imports', 'error'],
  ['@typescript-eslint/default-param-last', 'error'],
  ['@typescript-eslint/explicit-function-return-type', 'error'],
  ['@typescript-eslint/explicit-member-accessibility', 'error'],
  ['@typescript-eslint/explicit-module-boundary-types', 'error'],
  ['@typescript-eslint/init-declarations', 'error'],
  ['@typescript-eslint/max-params', 'error'],
  ['@typescript-eslint/member-ordering', 'error'],
  ['@typescript-eslint/method-signature-style', 'error'],
  ['@typescript-eslint/no-array-constructor', 'error'],
  ['@typescript-eslint/no-confusing-non-null-assertion', 'error'],
  ['@typescript-eslint/no-dupe-class-members', 'error'],
  ['@typescript-eslint/no-duplicate-enum-values', 'error'],
  ['@typescript-eslint/no-dynamic-delete', 'error'],
  ['@typescript-eslint/no-empty-function', 'error'],
  ['@typescript-eslint/no-empty-object-type', 'error'],
  ['@typescript-eslint/no-explicit-any', 'error'],
  ['@typescript-eslint/no-extra-non-null-assertion', 'error'],
  ['@typescript-eslint/no-extraneous-class', 'error'],
  ['@typescript-eslint/no-import-type-side-effects', 'error'],
  ['@typescript-eslint/no-inferrable-types', 'error'],
  ['@typescript-eslint/no-invalid-this', 'error'],
  ['@typescript-eslint/no-invalid-void-type', 'error'],
  ['@typescript-eslint/no-loop-func', 'error'],
  ['@typescript-eslint/no-magic-numbers', 'error'],
  ['@typescript-eslint/no-misused-new', 'error'],
  ['@typescript-eslint/no-namespace', 'error'],
  ['@typescript-eslint/no-non-null-asserted-nullish-coalescing', 'error'],
  ['@typescript-eslint/no-non-null-asserted-optional-chain', 'error'],
  ['@typescript-eslint/no-non-null-assertion', 'error'],
  ['@typescript-eslint/no-redeclare', 'error'],
  ['@typescript-eslint/no-require-imports', 'error'],
  ['@typescript-eslint/no-restricted-imports', 'error'],
  ['@typescript-eslint/no-restricted-types', 'error'],
  ['@typescript-eslint/no-shadow', 'error'],
  ['@typescript-eslint/no-this-alias', 'error'],
  ['@typescript-eslint/no-unnecessary-parameter-property-assignment', 'error'],
  ['@typescript-eslint/no-unnecessary-type-constraint', 'error'],
  ['@typescript-eslint/no-unsafe-declaration-merging', 'error'],
  ['@typescript-eslint/no-unsafe-function-type', 'error'],
  ['@typescript-eslint/no-unused-expressions', 'error'],
  ['@typescript-eslint/no-unused-vars', 'error'],
  ['@typescript-eslint/no-use-before-define', 'error'],
  ['@typescript-eslint/no-useless-constructor', 'error'],
  ['@typescript-eslint/no-useless-empty-export', 'error'],
  ['@typescript-eslint/no-wrapper-object-types', 'error'],
  ['@typescript-eslint/parameter-properties', 'error'],
  ['@typescript-eslint/prefer-as-const', 'error'],
  ['@typescript-eslint/prefer-enum-initializers', 'error'],
  ['@typescript-eslint/prefer-for-of', 'error'],
  ['@typescript-eslint/prefer-function-type', 'error'],
  ['@typescript-eslint/prefer-literal-enum-member', 'error'],
  ['@typescript-eslint/prefer-namespace-keyword', 'error'],
  ['@typescript-eslint/triple-slash-reference', 'error'],
  ['@typescript-eslint/unified-signatures', 'error'],
  ['no-var', 'error'],
  ['prefer-const', 'error'],
  ['prefer-rest-params', 'error'],
  ['prefer-spread', 'error'],
  ['@typescript-eslint/await-thenable', 'error'],
  ['@typescript-eslint/no-array-delete', 'error'],
  ['@typescript-eslint/no-base-to-string', 'error'],
  ['@typescript-eslint/no-duplicate-type-constituents', 'error'],
  ['@typescript-eslint/no-floating-promises', 'error'],
  ['@typescript-eslint/no-for-in-array', 'error'],
  ['@typescript-eslint/no-implied-eval', 'error'],
  ['@typescript-eslint/no-misused-promises', 'error'],
  ['@typescript-eslint/no-redundant-type-constituents', 'error'],
  ['@typescript-eslint/no-unnecessary-type-assertion', 'error'],
  ['@typescript-eslint/no-unsafe-argument', 'error'],
  ['@typescript-eslint/no-unsafe-assignment', 'error'],
  ['@typescript-eslint/no-unsafe-call', 'error'],
  ['@typescript-eslint/no-unsafe-enum-comparison', 'error'],
  ['@typescript-eslint/no-unsafe-member-access', 'error'],
  ['@typescript-eslint/no-unsafe-return', 'error'],
  ['@typescript-eslint/no-unsafe-unary-minus', 'error'],
  ['@typescript-eslint/only-throw-error', 'error'],
  ['@typescript-eslint/prefer-promise-reject-errors', 'error'],
  ['@typescript-eslint/require-await', 'error'],
  [
    '@typescript-eslint/restrict-plus-operands',
    [
      'error',
      {
        allowAny: false,
        allowBoolean: false,
        allowNullish: false,
        allowNumberAndString: false,
        allowRegExp: false,
      },
    ],
  ],
  [
    '@typescript-eslint/restrict-template-expressions',
    [
      'error',
      {
        allowAny: false,
        allowBoolean: false,
        allowNever: false,
        allowNullish: false,
        allowNumber: false,
        allowRegExp: false,
      },
    ],
  ],
  ['@typescript-eslint/unbound-method', 'error'],
  ['@typescript-eslint/no-confusing-void-expression', 'error'],
  ['@typescript-eslint/no-deprecated', 'error'],
  ['@typescript-eslint/no-meaningless-void-operator', 'error'],
  ['@typescript-eslint/no-misused-spread', 'error'],
  ['@typescript-eslint/no-mixed-enums', 'error'],
  ['@typescript-eslint/no-unnecessary-boolean-literal-compare', 'error'],
  ['@typescript-eslint/no-unnecessary-condition', 'error'],
  ['@typescript-eslint/no-unnecessary-template-expression', 'error'],
  ['@typescript-eslint/no-unnecessary-type-arguments', 'error'],
  ['@typescript-eslint/no-unnecessary-type-parameters', 'error'],
  ['@typescript-eslint/prefer-reduce-type-parameter', 'error'],
  ['@typescript-eslint/prefer-return-this-type', 'error'],
  ['@typescript-eslint/related-getter-setter-pairs', 'error'],
  [
    '@typescript-eslint/return-await',
    ['error', 'error-handling-correctness-only'],
  ],
  ['@typescript-eslint/use-unknown-in-catch-callback-variable', 'error'],
  ['@typescript-eslint/dot-notation', 'error'],
  ['@typescript-eslint/non-nullable-type-assertion-style', 'error'],
  ['@typescript-eslint/prefer-find', 'error'],
  ['@typescript-eslint/prefer-includes', 'error'],
  ['@typescript-eslint/prefer-nullish-coalescing', 'error'],
  ['@typescript-eslint/prefer-optional-chain', 'error'],
  ['@typescript-eslint/prefer-regexp-exec', 'error'],
  ['@typescript-eslint/prefer-string-starts-ends-with', 'error'],
  ['react-hooks/rules-of-hooks', 'error'],
  ['react-hooks/exhaustive-deps', 'warn'],
  ['rules-of-hooks', 'error'],
  ['exhaustive-deps', 'error'],
  [
    'react-refresh/only-export-components',
    ['error', { allowConstantExport: true }],
  ],
  ['only-export-components', 'error'],
];

/**
 *
 * Analyzes the ESLint config to collect and display all unique rules.
 * This function handles circular references and normalizes plugin rule objects.
 * It prints the total number of rules and unique rules to the console.
 * @param {*} config
 */
function analyzeRules(config) {
  /**
   * Recursively collects all "rules" objects from a config, handling circular references.
   * @param {object} config - The ESLint config object.
   * @returns {Array<object>} - Array of all found "rules" objects.
   */
  function collectAllRules(config) {
    const rulesList = [];
    const visited = new WeakSet();

    function traverse(obj) {
      if (obj && typeof obj === 'object' && !visited.has(obj)) {
        visited.add(obj);
        if (obj.rules && typeof obj.rules === 'object') {
          rulesList.push(obj.rules);
        }
        for (const key in obj) {
          if (Object.prototype.hasOwnProperty.call(obj, key)) {
            traverse(obj[key]);
          }
        }
      }
    }

    traverse(config);
    return rulesList;
  }

  /**
   * Flattens an array of "rules" objects into an array of { rule, value } pairs.
   * @param {Array<object>} rulesObjects - Array of "rules" objects.
   * @returns {Array<{rule: string, value: any}>}
   */
  function flattenRules(rulesObjects) {
    return rulesObjects.flatMap((rules) =>
      Object.entries(rules).map(([rule, value]) => ({ rule, value })),
    );
  }

  /**
   * Returns a Map of unique rules, filtering out 'off' and 0, and normalizing plugin rule objects.
   * @param {Array<{rule: string, value: any}>} rulesArray
   * @returns {Map<string, any>}
   */
  function getUniqueRules(rulesArray) {
    const unique = new Map();
    for (const { rule, value: originalValue } of rulesArray) {
      let value = originalValue;
      if (value === 'off' || value === 0) {
        unique.delete(rule);
        continue;
      }
      if (
        typeof value === 'object' &&
        value !== null &&
        !Array.isArray(value) &&
        value.create
      ) {
        value = 'error';
      }
      unique.set(rule, value);
    }
    return unique;
  }

  const allRulesObjects = collectAllRules(config);
  const allRules = flattenRules(allRulesObjects);
  const uniqueRules = getUniqueRules(allRules);

  console.log(
    'All ESLint Rules:',
    util.inspect(allRules, { depth: null, colors: true, maxArrayLength: null }),
  );
  console.log('Total Rules:', allRules.length);

  console.log(
    'Unique ESLint Rules:',
    util.inspect(Array.from(uniqueRules.entries()), {
      depth: null,
      colors: true,
      maxArrayLength: null,
    }),
  );
  console.log('Total Unique Rules:', uniqueRules.size);
}
